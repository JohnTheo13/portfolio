import React from 'react'
import PropTypes from 'prop-types'
import Radium, { StyleRoot } from 'radium'
import { P } from '../index'
import { popoverStyle, icon, heading, arrow } from './styles'

let Triangle = props => (
  <div style={{ ...arrow.default, ...arrow.place(props) }} >
    <div style={arrow.after(props)} />
  </div>
)

Triangle = Radium(Triangle)

let Popover = props => (
  <div style={popoverStyle(props)} >
    <Triangle {...props} />
    <span>
      <img alt="info icon" src={`https://website-assets.imgix.net/icon/circle_${props.tag}.svg`} style={icon} />
    </span>
    <P noMargin bold style={heading(props)}>
      {props.heading}
    </P>
    {props.children}
  </div>
)

Popover.propTypes = {
  placement: PropTypes.string.isRequired,
  heading: PropTypes.string.isRequired,
  children: PropTypes.any.isRequired,
  tag: PropTypes.string.isRequired,
}

Popover = Radium(Popover)

const PopoverDefault = props => (
  <StyleRoot>
    <Popover {...props} />
  </StyleRoot>
)

export default Radium(PopoverDefault)
