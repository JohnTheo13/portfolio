import { expect } from 'chai'
import { describe, it } from 'storybook-addon-specifications'
import { mount } from 'enzyme'
import React from 'react'
import PopoverDefault from './PopoverDefault'

const test = () => (
  describe('Popovers tests', () => {
    const wrapper = mount(<PopoverDefault placement="top" heading="TopTop" tag="info" >
                              Content
                          </PopoverDefault>)
    it('should render the right Heading', () =>
      expect(wrapper.find('Popover').find('div').find('Paragraph').find('p')
        .text()).to.equal('TopTop'))
    it('should render the right content', () =>
      expect(wrapper.find('Popover').get(0).props.children).to.equal('Content'))
    it('should render the bottom arrow', () => {
      expect(wrapper.find('Triangle').children(0).props().style).to.have.deep.include({ bottom: '-10px' })
      expect(wrapper.find('Triangle').at(0).childAt(0).props().children.props.style).to.have.deep.include({ bottom: '-13.5px' })
    })
    it('should render the top arrow', () => {
      wrapper.setProps({ placement: 'bottom' })
      expect(wrapper.find('Triangle').children(0).props().style.top).to.equal('0px')
      expect(wrapper.find('Triangle').at(0).childAt(0).props().children.props.style.top).to.equal('-13.5px')
    })
    it('should render the left arrow', () => {
      wrapper.setProps({ placement: 'right' })
      expect(wrapper.find('Triangle').children(0).props().style.left).to.equal('-10px')
      expect(wrapper.find('Triangle').at(0).childAt(0).props().children.props.style.left).to.equal('-13.5px')
    })
    it('should render the right arrow', () => {
      wrapper.setProps({ placement: 'left' })
      expect(wrapper.find('Triangle').children(0).props().style.right).to.equal('-10px')
      expect(wrapper.find('Triangle').at(0).childAt(0).props().children.props.style.right).to.equal('-13.5px')
    })
  })
)

export default test
