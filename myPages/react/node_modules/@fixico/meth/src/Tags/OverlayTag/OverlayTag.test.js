import { expect } from 'chai'
import { shallow } from 'enzyme'
import { describe, it, beforeEach } from 'storybook-addon-specifications'
import React from 'react'
import { theme } from '../../index'
import OverlayTag from './OverlayTag'

const test = () => (
  describe('OverlayTag', () => {
    let wrapper
    beforeEach(() => {
      wrapper = shallow(<OverlayTag
        name="cool tag"
        theme="green"
        description="tooltip"
      />)
    })
    it('renders the component', () => {
      expect(wrapper).to.exist
    })
    it('has prop name', () => {
      expect(wrapper.instance().props.name).to.equal('cool tag')
    })
    it('has prop description', () => {
      expect(wrapper.instance().props.description).to.equal('tooltip')
    })
    it('change hover state when hover', () => {
      wrapper.children().simulate('mouseOver')
      expect(wrapper.instance().state.hover).to.be.true
    })
    it('when hover change backgroundColor', () => {
      wrapper.children().simulate('mouseOver')
      expect(wrapper.children().prop('style')).to.include({ backgroundColor: theme.successMedium })
    })
    it('when hover change font color', () => {
      wrapper.children().simulate('mouseOver')
      expect(wrapper.children().children().prop('style')).to.include({ color: theme.white })
    })
    it('when icon shows icon', () => {
      wrapper.setProps({ icon: 'stopwatch' })
      expect(wrapper.children().children().at(0).props().name).to.equal('stopwatch_icon')
    })
    it('when theme red to change backgroundColor to red on hover', () => {
      wrapper.setProps({ theme: 'red' })
      wrapper.children().simulate('mouseOver')
      expect(wrapper.children().prop('style')).to.include({ backgroundColor: theme.errorMedium })
    })
  })
)

export default test
