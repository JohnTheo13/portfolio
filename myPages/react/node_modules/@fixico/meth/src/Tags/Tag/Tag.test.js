import { expect } from 'chai'
import { shallow } from 'enzyme'
import { describe, it, beforeEach } from 'storybook-addon-specifications'
import React from 'react'
import { theme } from '../../index'
import Tag from './Tag'

const test = () => (
  describe('Tag', () => {
    let wrapper
    beforeEach(() => {
      wrapper = shallow(<Tag active={false}>Tag</Tag>)
    })
    it('renders the component', () => {
      expect(wrapper).to.exist
    })
    it('should render font color white when prop active is true', () => {
      wrapper.setProps({ active: true })
      expect(wrapper.find('Header').props().style).to.include({ color: theme.white })
    })
    it('should render font color green when prop active is false', () => {
      expect(wrapper.find('Header').props().style).to.include({ color: theme.successMedium })
    })
    it('when receiving custom color should change font color', () => {
      wrapper.setProps({ fontColor: theme.error })
      expect(wrapper.find('Header').props().style).to.include({ color: theme.error })
    })
    it('when receiving custom colors and active should change font color', () => {
      wrapper.setProps({ fontColor: theme.error, fontActive: theme.green, active: true })
      expect(wrapper.find('Header').props().style).to.include({ color: theme.green })
    })
    it('when receiving icon props should render the icon', () => {
      wrapper.setProps({ icon: true })
      expect(wrapper.find('Icon').length).to.equal(1)
    })
    it('when not receiving icon props should not render the icon', () => {
      wrapper.setProps({ icon: false })
      expect(wrapper.find('Icon').length).to.equal(0)
    })
    it('icon should have color white when prop active is true', () => {
      wrapper.setProps({ icon: true, active: true })
      expect(wrapper.find('Icon').props().hover).to.equal(theme.white)
    })
    it('icon should have color green when prop active is true', () => {
      wrapper.setProps({ icon: true, active: false })
      expect(wrapper.find('Icon').props().hover).to.equal(theme.successMedium)
    })
    it('icon should have custom color theme.error when props {fontColor: theme.error}', () => {
      wrapper.setProps({ icon: true, fontColor: theme.error })
      expect(wrapper.find('Icon').props().hover).to.equal(theme.error)
    })
  })
)

export default test
