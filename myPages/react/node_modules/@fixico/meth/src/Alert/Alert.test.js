import React from 'react'
import { expect } from 'chai'
import { shallow } from 'enzyme'
import { describe, it } from 'storybook-addon-specifications'
import theme from '../theme'
import Alert from './Alert'

const defaultTest = () => (
  describe('Alert', () => {
    const wrapper = shallow(<Alert header="header" body="body" status="success" />)
    it('should render the component', () => {
      expect(wrapper).to.exist
    })
    it('should have a green font, background and border when prop type success', () => {
      expect(wrapper.prop('style')).to.include({ color: theme.successMedium, backgroundColor: theme.successLight, border: `${theme.success} 1px solid` })
    })
    it('should have a red font, background and border when prop type error', () => {
      wrapper.setProps({ status: 'error' })
      expect(wrapper.prop('style')).to.include({ color: theme.errorMedium, backgroundColor: theme.errorLight, border: `${theme.error} 1px solid` })
    })
    it('should have a blue font, background and border when prop type info', () => {
      wrapper.setProps({ status: 'info' })
      expect(wrapper.prop('style')).to.include({ color: theme.infoMedium, backgroundColor: theme.infoLight, border: `${theme.info} 1px solid` })
    })
    it('should have a success icon', () => {
      wrapper.setProps({ status: 'success' })
      expect(wrapper.find('img').prop('src')).to.include('/icon/circle_success.svg')
    })
    it('should have a error icon', () => {
      wrapper.setProps({ status: 'error' })
      expect(wrapper.find('img').prop('src')).to.include('/icon/circle_error.svg')
    })
    it('should have a info icon', () => {
      wrapper.setProps({ status: 'info' })
      expect(wrapper.find('img').prop('src')).to.include('/icon/circle_info.svg')
    })
  })
)

export default defaultTest
