import { expect } from 'chai'
import sinon from 'sinon'
import { shallow } from 'enzyme'
import { describe, it, beforeEach } from 'storybook-addon-specifications'
import React from 'react'
import theme from '../../theme'
import TransparentButton from './TransparentButton'

const test = () => (
  describe('TransparentButton default', () => {
    let wrapper
    let onClick
    beforeEach(() => {
      onClick = sinon.spy()
      wrapper = shallow(<TransparentButton onClick={onClick}>Hello</TransparentButton>)
    })
    it('renders the component', () => {
      expect(wrapper).to.exist
    })
    it('should contain an onClick props', () => (
      expect(wrapper.find('button').prop('onClick')).to.exist
    ))
    it('should render transparent button', () => {
      expect(wrapper.find('button').prop('style')).to.have.deep.include({
        backgroundColor: 'rgba(0,0,0, 0.7)',
        color: theme.white,
        paddingLeft: theme.whitespaceS,
        paddingRight: '0px',
      })
    })
    it('the onClick props should be a function', () => {
      expect(wrapper.find('button').prop('onClick')).to.be.a('function')
    })
    it('when clicked it should call the onClick function', () => {
      wrapper.find('button').simulate('click')
      expect(onClick.callCount).to.equal(1)
    })
    it('should contain image element', () => {
      expect(wrapper.find('img')).to.have.length(1)
    })
    it('when disabled should contain the prop disabled', () => {
      wrapper.setProps({ disabled: true })
      expect(wrapper.find('button').prop('disabled')).to.exist
    })
    it('should not be able to click the button', () => {
      wrapper.setProps({ disabled: true })
      wrapper.find('button').simulate('click')
      expect(onClick.callCount).to.equal(0)
    })
  })
)

export default test
