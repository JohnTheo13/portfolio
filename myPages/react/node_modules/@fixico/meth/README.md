# Meth component library - Best Pratices

###### Before start diving into this project, please be aware of our best practices and try to follow.

## Pull Requests
There's great reasons to make pull requests when you code.   

You will learn by seen the way other people code and receive feedback on your code, you will receive tips on better ways to approach a problem, other people with fresh eyes can spot ugly things that passed unoticed.  

It also helps to keep track on what has been changed in the code base.   

When starting a new components create a branch with a name that represents clearly what are you doing.
Commit constantly and with clear messages for each commit.   

After you are finished, with no errors on ESLint and components tested create a PR with your commits explaining at the description what you've done, what props are accepted by the component, hwo to use it and other relevant informations.   

Tag some coleagues to review your code.   

Wait fot the review. If they point out something wrong, fix it in the same branch, push it and wait for the second review.
If your PR is approved by yours colleagues you can merge it.

## ESLint
Yes, we lint our files.   
Lint will ensure that so best practices are followed. Search the error messages and learn with that.   
Make sure that all your .js files are passing the lint check before open a PR.      
We have a pre-commit hook that won't allow you to commit without fixing the lint alerts.

## Unit Test and Storybook
Our development process starts with Storybook and unit testing.   
We first write a small story, with an empty component and the unit tests and then we develop the component.   
If you don't know [Storybook](https://storybook.js.org/) take a time to learn it.   
It's a great tool for creating single responsibilities components given the ability to change the components props and states through its interface and share with other people from the team (designers =D).   
Our test stack is [Mocha](https://mochajs.org), [Chai](http://chaijs.com/), [Enzyme](http://airbnb.io/enzyme/docs/) and [Sinon](http://sinonjs.org).  
We attach the tests with an addon to the component story. You can follow the tests results directly through Storybook at the right panel under the specification tab.

## CSS
We use inline CSS in JSX. Something like this:

```html

// When just one style:
render() {
  return (
    <div syle={{ color: '#FFF' }}>Hello World</div>
  )
}
```
``` javascript

// when multiple and more complex styles
const styleAsObj = {
  backgroundColor: '#FFF',
  float: 'left',
  display: 'block',
  paddingLeft: '15px',
}

const styleWithProps = size => (
  {
    backgroundColor: '#FFF',
    float: 'left',
    display: 'block',
    paddingLeft: `${size}px`,
  }
)

...
render() {
  return (
    <div>
      <div style={styleAsObj}></div>
      <div style={styleWithProps(props.size)}></div>
    </div>
  )
}
...

```

We [Radium](https://github.com/FormidableLabs/radium) library to help with `:focus`, `:hover` and `:active`.
For overwriting boostrap styles we might have to use .css files.   
Everything else should be handled in the react component.


## Single Component per file
We should have only one component per file.   
Don't use `displayName` for naming your component.   
The file name should have the same name as the component name.   
We don't use **.jsx** extension, only **.js**.   
Prefer `default export`.  

``` javascript
// MyComponent.js
import React from 'react'

const MyComponent = props => (
  <div>
    <PrimaryButton>Click Me!</PrimaryButton>
  </div>
)

export default MyComponent
```

## Stateless vs statefull components
We should use stateless components when possible. Stateless components are functional components because they are literally functions. We use ES6 arrow functions for that:

``` javascript
import React from 'react'
import PropTypes from 'prop-types'

const doSomething = () => {
  // cool stuff goes here
}

const MyComponent = props => (
  <div style={props.style}>
    <PrimaryButton onClick={doSomething}>{this.props.text}</PrimaryButton>
  </div>
)

MyComponent.defaultProps = {
  style: {},
}

MyComponent.propTypes = {
  style: PropTypes.object,
  text: PropTypes.string.isRequired,
}

export default MyComponent
```

If we need to use the React state and life cicles methods, than we do it like:

``` javascript
import React, { Component } from 'react'
import OtherComponent from './OtherComponent'

class MyStatefullComponent extends Component {
  state = {
    foo: true,
    bar: false,
  }

  render() {
    return (
      <div>
        <OtherComponent />
      </div>
    )
  }
}

export default MyStatefullComponent
```

## propTypes and defaultProps
All components should have proptypes, this will help the others developers working with your code to understand what is expected from the component.

For stateless components we can set propTypes outside the functional components, right below it:

``` javascript
const MyComponent = props => (
  <div style={props.style}>
    <PrimaryButton onClick={doSomething}>{this.props.text}</PrimaryButton>
  </div>
)

MyComponent.defaultProps = {
  style: {},
}

MyComponent.propTypes = {
  style: PropTypes.object,
  text: PropTypes.string.isRequired,
}
```

On statefull components, class components, the propTypes goes inside the component, right below state, using ES7 static properties:

``` javascript
class Profile extends Component {
  state = { expanded: false }

  static propTypes = {
    user: PropTypes.object.isRequired,
    title: PropTypes.string
  }

  static defaultProps = {
    title: 'Your Name'
  }
```

## Links related
Although we are specifying some best practices here, actually there's much others that you must to look up and garantee good code quality.

Here follows some great links, please take a time to read them before starting work in the project:

- [React Bits, compilation of best practices, tips and tricks](https://github.com/vasanthk/react-bits)
- [Airbnb React/JSX Style Guide](https://github.com/airbnb/javascript/tree/master/react)
